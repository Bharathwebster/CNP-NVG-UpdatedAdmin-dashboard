{"version":3,"file":"ngx-ui-scroll.umd.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src/component/utils/assignSettings.ts","../../src/component/classes/settings.ts","../../src/component/interfaces/direction.ts","../../src/component/classes/domRoutines.ts","../../src/component/classes/padding.ts","../../src/component/classes/viewport.ts","../../src/component/classes/cache.ts","../../src/component/classes/buffer.ts","../../src/component/classes/fetch.ts","../../src/component/classes/clip.ts","../../src/component/utils/throttle.ts","../../src/component/utils/checkDatasource.ts","../../src/component/workflow.ts","../../src/component/workflow/shouldFetch.ts","../../src/component/workflow/fetch.ts","../../src/component/classes/item.ts","../../src/component/workflow/processFetch.ts","../../src/component/workflow/render.ts","../../src/component/workflow/adjustFetch.ts","../../src/component/workflow/shouldClip.ts","../../src/component/workflow/clip.ts","../../src/component/runner.ts","../../src/ui-scroll.component.ts","../../src/ui-scroll.directive.ts","../../src/ui-scroll.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","const assignBoolean = (target, source, token, defaults) => {\r\n  const param = source[token];\r\n  if (typeof param === 'undefined') {\r\n    return;\r\n  }\r\n  if (typeof param !== 'boolean') {\r\n    console.warn(token + ' setting parse error, set it to ' + defaults[token] + ' (default)');\r\n    return;\r\n  }\r\n  target[token] = param;\r\n  return true;\r\n};\r\n\r\nconst assignNumeric = (target, source, token, defaults, integer = false) => {\r\n  const param = source[token];\r\n  if (typeof param === 'undefined') {\r\n    return;\r\n  }\r\n  if (typeof param !== 'number') {\r\n    console.warn(token + ' setting parse error, set it to ' + defaults[token] + ' (default)');\r\n    return;\r\n  }\r\n  if (integer && parseInt(param.toString(), 10) !== param) {\r\n    console.warn(token + ' setting parse error, set it to ' + defaults[token] + ' (default)');\r\n    return;\r\n  }\r\n  target[token] = param;\r\n  return true;\r\n};\r\n\r\nconst assignMinimalNumeric = (target, source, token, defaults, minSettings, integer = false) => {\r\n  if (assignNumeric(target, source, token, defaults, integer) !== true) {\r\n    return;\r\n  }\r\n  if (target[token] < minSettings[token]) {\r\n    console.warn(token + ' setting is less than minimum, set it to ' + minSettings[token]);\r\n    target[token] = minSettings[token];\r\n    return;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const assignSettings = (target, settings, defaults, minSettings) => {\r\n  Object.assign(target, defaults);\r\n\r\n  if (typeof settings === 'undefined') {\r\n    return;\r\n  }\r\n  if (typeof settings !== 'object') {\r\n    console.warn('settings is not an object, fallback to the defaults');\r\n    return;\r\n  }\r\n\r\n  assignNumeric(target, settings, 'startIndex', defaults);\r\n  assignMinimalNumeric(target, settings, 'bufferSize', defaults, minSettings, true);\r\n  assignMinimalNumeric(target, settings, 'padding', defaults, minSettings);\r\n  assignBoolean(target, settings, 'infinite', defaults);\r\n  assignBoolean(target, settings, 'horizontal', defaults);\r\n\r\n  // undocumented settings, for tests only\r\n  assignBoolean(target, settings, 'clipAfterFetchOnly', defaults);\r\n  assignBoolean(target, settings, 'clipAfterScrollOnly', defaults);\r\n};\r\n","import { Settings as SettingsInterface } from '../interfaces/settings';\nimport { assignSettings } from '../utils/assignSettings';\n\nexport const defaultSettings: SettingsInterface = {\n  startIndex: 1,\n  bufferSize: 5,\n  padding: 0.5,\n  infinite: false,\n  horizontal: false\n};\n\nexport const minSettings: SettingsInterface = {\n  bufferSize: 1,\n  padding: 0.1\n};\n\nexport class Settings implements SettingsInterface {\n\n  // external settings, have defaults\n  startIndex;\n  bufferSize;\n  padding;\n  infinite;\n  horizontal;\n\n  // internal settings\n  debug = false; // logging; need to turn off in release\n  itemIdPrefix = ''; // todo : scroll instance index ?\n  clipAfterFetchOnly = true;\n  clipAfterScrollOnly = true;\n\n  constructor(settings?: SettingsInterface) {\n    assignSettings(this, settings, defaultSettings, minSettings);\n  }\n}\n","export enum Direction {\n  forward = 'forward',\n  backward = 'backward'\n}\n","import { Direction } from '../interfaces/direction';\nimport { Settings } from './settings';\n\nexport class Routines {\n\n  private horizontal: boolean;\n\n  constructor(settings: Settings) {\n    this.horizontal = settings.horizontal;\n  }\n\n  getScrollPosition(element): number {\n    return element[this.horizontal ? 'scrollLeft' : 'scrollTop'];\n  }\n\n  setScrollPosition(element, value: number) {\n    element[this.horizontal ? 'scrollLeft' : 'scrollTop'] = value;\n  }\n\n  getParams(element): ClientRect {\n    return element.getBoundingClientRect();\n  }\n\n  getSize(element): number {\n    return this.getParams(element)[this.horizontal ? 'width' : 'height'];\n  }\n\n  getSizeStyle(element): number {\n    return parseInt(element.style[this.horizontal ? 'width' : 'height'], 10) || 0;\n  }\n\n  setSizeStyle(element, value: number) {\n    element.style[this.horizontal ? 'width' : 'height'] = `${value}px`;\n  }\n\n  getScrollableSize(element): number {\n    return element[this.horizontal ? 'scrollWidth' : 'scrollHeight'];\n  }\n\n  getRectEdge(params: ClientRect, direction: Direction, opposite: boolean): number {\n    const forward = !opposite ? Direction.forward : Direction.backward;\n    return params[direction === forward ? (this.horizontal ? 'right' : 'bottom') : (this.horizontal ? 'left' : 'top')];\n  }\n\n  getEdge(element, direction: Direction, opposite: boolean): number {\n    const params = this.getParams(element);\n    return this.getRectEdge(params, direction, opposite);\n  }\n\n  getEdge2(element, direction: Direction, relativeElement, opposite: boolean): number {\n    // vertical only ?\n    return element.offsetTop - (relativeElement ? relativeElement.scrollTop : 0) +\n      (direction === (!opposite ? Direction.forward : Direction.backward) ? this.getSize(element) : 0);\n  }\n\n  hideElement(element) {\n    element.style.display = 'none';\n  }\n\n}\n","import { Direction } from '../interfaces/direction';\r\nimport { Routines } from './domRoutines';\r\n\r\nexport class Padding {\r\n\r\n  element = null;\r\n  direction: Direction;\r\n  routines: Routines;\r\n\r\n  constructor(element, direction: Direction, routines: Routines) {\r\n    this.element = element.querySelector(`[data-padding-${direction}]`);\r\n    this.direction = direction;\r\n    this.routines = routines;\r\n  }\r\n\r\n  get size(): number {\r\n    return this.routines.getSizeStyle(this.element);\r\n  }\r\n\r\n  set size(value: number) {\r\n    this.routines.setSizeStyle(this.element, value);\r\n  }\r\n\r\n  getEdge(): number {\r\n    return this.routines.getEdge(this.element, this.direction, true);\r\n  }\r\n\r\n}\r\n","import { ElementRef } from '@angular/core';\nimport { Padding } from './padding';\nimport { Direction } from '../interfaces/direction';\nimport { Routines } from './domRoutines';\nimport { Settings } from './settings';\n\nexport class ViewportPadding {\n  forward: Padding;\n  backward: Padding;\n\n  constructor(element, routines: Routines) {\n    this.forward = new Padding(element, Direction.forward, routines);\n    this.backward = new Padding(element, Direction.backward, routines);\n  }\n}\n\nexport class Viewport {\n\n  private settings: Settings;\n  private routines: Routines;\n  private host;\n  scrollable;\n  padding: ViewportPadding;\n  syntheticScrollPosition: number;\n\n  private lastPosition: number;\n\n  constructor(elementRef: ElementRef, settings: Settings, routines: Routines) {\n    this.settings = settings;\n    this.routines = routines;\n    this.host = elementRef.nativeElement;\n    this.scrollable = elementRef.nativeElement.parentElement;\n    this.padding = new ViewportPadding(this.host, this.routines);\n    this.syntheticScrollPosition = null;\n  }\n\n  get children(): HTMLCollection {\n    return this.host.children;\n  }\n\n  get scrollPosition(): number {\n    return this.routines.getScrollPosition(this.scrollable);\n  }\n\n  set scrollPosition(value: number) {\n    this.routines.setScrollPosition(this.scrollable, value);\n    this.syntheticScrollPosition = this.scrollPosition;\n  }\n\n  saveScrollPosition() {\n    this.lastPosition = this.scrollPosition;\n  }\n\n  getLastPosition(): number {\n    return this.lastPosition;\n  }\n\n  getSize(): number {\n    return this.routines.getSize(this.scrollable);\n  }\n\n  getScrollableSize(): number {\n    return this.routines.getScrollableSize(this.scrollable);\n  }\n\n  getBufferPadding(): number {\n    return this.getSize() * this.settings.padding;\n  }\n\n  getEdge(direction: Direction, opposite?: boolean): number {\n    return this.routines.getEdge(this.scrollable, direction, opposite);\n  }\n\n  getLimit(direction: Direction, opposite?: boolean): number {\n    return this.getEdge(direction, opposite) +\n      (direction === (!opposite ? Direction.forward : Direction.backward) ? 1 : -1) * this.getBufferPadding();\n  }\n\n}\n","import { Item } from './item';\n\nexport class ItemCache {\n  $index: number;\n  nodeId: string;\n  data: any; // todo: cache data only if it is permitted by settings\n\n  params: ClientRect;\n\n  constructor(item: Item) {\n    this.$index = item.$index;\n    this.nodeId = item.nodeId;\n    this.data = item.data;\n    this.params = item.getParams();\n  }\n}\n\nexport class Cache {\n  items: Array<ItemCache>;\n\n  constructor() {\n    this.items = [];\n  }\n\n  add(item: Item) {\n    const found = this.items.find(i => i.$index === item.$index);\n    if (found) {\n      found.data = item.data;\n      found.params = item.getParams();\n    } else {\n      // todo: do we need the list to be sorted? maybe an object?\n      this.items.push(new ItemCache(item));\n    }\n  }\n\n  get(index: number): ItemCache {\n    return this.items.find(i => i.$index === index);\n  }\n}\n","import { Direction } from '../interfaces/index';\nimport { Cache } from './cache';\nimport { Item } from './item';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n\nexport class Index {\n  forward: number = null;\n  backward: number = null;\n}\n\nexport class Buffer {\n\n  private _items: Array<Item>;\n  public $items = new BehaviorSubject(null);\n\n  bof: boolean;\n  eof: boolean;\n  lastIndex: Index;\n  cache: Cache;\n\n  constructor() {\n    this.items = [];\n    this.bof = false;\n    this.eof = false;\n    this.lastIndex = new Index();\n    this.cache = new Cache();\n  }\n\n  set items(items: Array<Item>) {\n    this._items = items;\n    if (items.length) {\n      this.setLastIndices();\n    }\n    this.$items.next(items);\n  }\n\n  get items(): Array<Item> {\n    return this._items;\n  }\n\n  setLastIndices() {\n    this.lastIndex[Direction.backward] = this.items[0].$index;\n    this.lastIndex[Direction.forward] = this.items[this.items.length - 1].$index;\n  }\n\n  getFirstVisibleItemIndex(): number {\n    const length = this.items.length;\n    for (let i = 0; i < length; i++) {\n      if (!this.items[i].invisible) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  getLastVisibleItemIndex(): number {\n    for (let i = this.items.length - 1; i >= 0; i--) {\n      if (!this.items[i].invisible) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  getEdgeVisibleItemIndex(direction: Direction, opposite?: boolean): number {\n    return direction === (!opposite ? Direction.forward : Direction.backward) ?\n      this.getLastVisibleItemIndex() : this.getFirstVisibleItemIndex();\n  }\n\n  getFirstVisibleItem(): Item {\n    const index = this.getFirstVisibleItemIndex();\n    if (index >= 0) {\n      return this.items[index];\n    }\n  }\n\n  getLastVisibleItem(): Item {\n    const index = this.getLastVisibleItemIndex();\n    if (index >= 0) {\n      return this.items[index];\n    }\n  }\n\n  getEdgeVisibleItem(direction: Direction, opposite?: boolean): Item {\n    return direction === (!opposite ? Direction.forward : Direction.backward) ?\n      this.getLastVisibleItem() : this.getFirstVisibleItem();\n  }\n\n}\n","import { Item } from './item';\nimport { Direction } from '../interfaces/direction';\n\nexport class FetchByDirection {\n  shouldFetch: boolean;\n  startIndex: number;\n  private _newItemsData: Array<any>;\n  items: Array<Item>;\n  count: number;\n\n  constructor() {\n    this.count = 0;\n    this.reset();\n  }\n\n  reset() {\n    const count = this.count;\n    this.shouldFetch = false;\n    this.startIndex = null;\n    this._newItemsData = null;\n    this.items = null;\n    this.count = count;\n  }\n\n  set newItemsData(items: Array<Item>) {\n    this._newItemsData = items;\n    this.count++;\n  }\n\n  get newItemsData(): Array<Item> {\n    return this._newItemsData;\n  }\n}\n\nexport class FetchModel {\n  forward: FetchByDirection;\n  backward: FetchByDirection;\n\n  constructor() {\n    this.forward = new FetchByDirection();\n    this.backward = new FetchByDirection();\n  }\n\n  reset() {\n    this[Direction.forward].reset();\n    this[Direction.backward].reset();\n  }\n\n  get count(): number {\n    return this[Direction.backward].count + this[Direction.forward].count;\n  }\n\n  get items(): Array<Item> {\n    return [\n      ...this[Direction.backward].items ? this[Direction.backward].items : [],\n      ...this[Direction.forward].items ? this[Direction.forward].items : [],\n    ];\n  }\n\n  get shouldFetch(): boolean {\n    return this[Direction.forward].shouldFetch || this[Direction.backward].shouldFetch;\n  }\n\n  get hasNewItems(): boolean {\n    return !!(this[Direction.forward].newItemsData || this[Direction.backward].newItemsData);\n  }\n}\n","import { Direction } from '../interfaces/direction';\r\n\r\nexport class ClipByDirection {\r\n  shouldClip: boolean;\r\n  size: number;\r\n\r\n  constructor() {\r\n    this.shouldClip = false;\r\n    this.size = null;\r\n  }\r\n}\r\n\r\nexport class ClipModel {\r\n  forward: ClipByDirection;\r\n  backward: ClipByDirection;\r\n\r\n  constructor() {\r\n    this.forward = new ClipByDirection();\r\n    this.backward = new ClipByDirection();\r\n  }\r\n\r\n  get shouldClip(): boolean {\r\n    return this[Direction.forward].shouldClip || this[Direction.backward].shouldClip;\r\n  }\r\n}\r\n","export function throttle(func, wait, options?) {\r\n  let context, args, result;\r\n  let timeout = null;\r\n  let previous = 0;\r\n  if (!options) {\r\n    options = {};\r\n  }\r\n  const later = function () {\r\n    previous = options.leading === false ? 0 : Date.now();\r\n    timeout = null;\r\n    result = func.apply(context, args);\r\n    if (!timeout) {\r\n      context = args = null;\r\n    }\r\n  };\r\n  return function (this: any) {\r\n    const now = Date.now();\r\n    if (!previous && options.leading === false) {\r\n      previous = now;\r\n    }\r\n    const remaining = wait - (now - previous);\r\n    context = this;\r\n    args = arguments;\r\n    if (remaining <= 0 || remaining > wait) {\r\n      if (timeout) {\r\n        clearTimeout(timeout);\r\n        timeout = null;\r\n      }\r\n      previous = now;\r\n      result = func.apply(context, args);\r\n      if (!timeout) {\r\n        context = args = null;\r\n      }\r\n    } else if (!timeout && options.trailing !== false) {\r\n      timeout = setTimeout(later, remaining);\r\n    }\r\n    return result;\r\n  };\r\n}\r\n","export const checkDatasource = (datasource) => {\n  if (!datasource) {\n    throw new Error('No datasource provided');\n  }\n  if (!('get' in datasource)) {\n    throw new Error('Datasource get method is not implemented');\n  }\n  if (typeof datasource.get !== 'function') {\n    throw new Error('Datasource get is not a function');\n  }\n  if (datasource.get.length < 2) {\n    throw new Error('Datasource get method invalid signature');\n  }\n  return datasource;\n};\n","import { Observable } from 'rxjs/Observable';\n\nimport { Datasource, Direction, Run } from './interfaces/index';\nimport { Settings } from './classes/settings';\nimport { Routines } from './classes/domRoutines';\nimport { Viewport } from './classes/viewport';\nimport { Buffer } from './classes/buffer';\nimport { FetchModel } from './classes/fetch';\nimport { ClipModel } from './classes/clip';\n\nimport { checkDatasource } from './utils/index';\n\nexport class Workflow {\n\n  private observer;\n  public resolver: Observable<any>;\n\n  public bindData: Function;\n  public datasource: Datasource;\n  public settings: Settings;\n  public routines: Routines;\n  public viewport: Viewport;\n  public buffer: Buffer;\n\n  public count = 0;\n  public countDone = 0;\n  public pending: boolean;\n  public direction: Direction;\n  public scroll: boolean;\n  public next: boolean;\n  public fetch: FetchModel;\n  public clip: ClipModel;\n\n  constructor(context) {\n    this.resolver = Observable.create(_observer => this.observer = _observer);\n\n    this.bindData = () => {\n      this.next = true;\n      context.changeDetector.markForCheck();\n    };\n    this.datasource = checkDatasource(context.datasource);\n\n    this.settings = new Settings(context.datasource.settings);\n    this.routines = new Routines(this.settings);\n    this.viewport = new Viewport(context.elementRef, this.settings, this.routines);\n    this.buffer = new Buffer();\n\n    this.fetch = new FetchModel();\n    this.clip = new ClipModel();\n  }\n\n  reset() {\n    this.pending = false;\n    this.direction = null;\n    this.scroll = false;\n    this.next = false;\n    this.fetch.reset();\n    this.clip = new ClipModel();\n  }\n\n  start(options: Run = {}) {\n    this.count++;\n    this.log(`---=== Workflow ${this.count} run`);\n    this.reset();\n    this.pending = true;\n    this.direction = options.direction || null;\n    this.scroll = options.scroll || false;\n    return Promise.resolve(this);\n  }\n\n  continue() {\n    return Promise.resolve(this);\n  }\n\n  finalize() { // stop 1 cycle\n  }\n\n  end() {\n    this.pending = false;\n    this.countDone++;\n    this.viewport.saveScrollPosition();\n    this.finalize();\n  }\n\n  done() {\n    this.log(`---=== Workflow ${this.count} done`);\n    this.end();\n    this.observer.next(this.next);\n  }\n\n  fail(error: any) {\n    this.log(`---=== Workflow ${this.count} fail`);\n    this.end();\n    this.observer.error(error);\n  }\n\n  dispose() {\n    this.observer.complete();\n  }\n\n  log(...args) {\n    if (this.settings.debug) {\n      console.log.apply(this, args);\n    }\n  }\n\n}\n","import { Workflow } from '../workflow';\nimport { Direction } from '../interfaces/index';\n\nexport default class ShouldFetch {\n\n  static run(workflow: Workflow) {\n    if (workflow.direction !== Direction.backward) {\n      ShouldFetch.shouldFetchByDirection(Direction.forward, workflow);\n    }\n    if (workflow.direction !== Direction.forward) {\n      ShouldFetch.shouldFetchByDirection(Direction.backward, workflow);\n    }\n    return Promise.resolve(workflow);\n  }\n\n  static shouldFetchByDirection(direction: Direction, workflow: Workflow) {\n    const paddingEdge = workflow.viewport.padding[direction].getEdge();\n    const limit = workflow.viewport.getLimit(direction);\n    if ((direction === Direction.forward && workflow.buffer.eof) ||\n      (direction === Direction.backward && workflow.buffer.bof)) {\n      workflow.fetch[direction].shouldFetch = false;\n    } else {\n      workflow.fetch[direction].shouldFetch =\n        (direction === Direction.forward) ? paddingEdge < limit : paddingEdge > limit;\n    }\n    if (workflow.fetch[direction].shouldFetch) {\n      ShouldFetch.setStartIndex(direction, workflow);\n    }\n  }\n\n  static setStartIndex(direction: Direction, workflow: Workflow) {\n    const forward = direction === Direction.forward;\n    const back = -workflow.settings.bufferSize;\n    let start;\n    if (workflow.buffer.lastIndex[direction] === null) {\n      start = workflow.settings.startIndex + (forward ? 0 : back);\n    } else {\n      start = workflow.buffer.lastIndex[direction] + (forward ? 1 : back);\n    }\n    workflow.fetch[direction].startIndex = start;\n  }\n\n}\n","import { Workflow } from '../workflow';\nimport { Direction } from '../interfaces/index';\n\nexport default class Fetch {\n\n  static run(workflow: Workflow): Promise<any> {\n    const result = [];\n    if (workflow.fetch[Direction.backward].shouldFetch) {\n      result.push(Fetch.fetchByDirection(Direction.backward, workflow));\n    }\n    if (workflow.fetch[Direction.forward].shouldFetch) {\n      result.push(Fetch.fetchByDirection(Direction.forward, workflow));\n    }\n    return Promise.all(result).then(() => workflow);\n  }\n\n  static success(data: any, direction: Direction, workflow: Workflow) {\n    workflow.log(`resolved ${data.length} ${direction} items ` +\n      `(index = ${workflow.fetch[direction].startIndex}, count = ${workflow.settings.bufferSize})`);\n    workflow.fetch[direction].newItemsData = data;\n  }\n\n  static fetchByDirection(direction: Direction, workflow: Workflow): Promise<any> {\n    const result = new Promise((resolve, reject) => {\n      const success = (data) => {\n        Fetch.success(data, direction, workflow);\n        resolve(true);\n      };\n      const _get = <Function>workflow.datasource.get;\n      const _getResult = _get(workflow.fetch[direction].startIndex, workflow.settings.bufferSize, success, reject);\n      if (_getResult && typeof _getResult.then === 'function') { // DatasourceGetPromise\n        _getResult.then(success, reject);\n      } else if (_getResult && typeof _getResult.subscribe === 'function') { // DatasourceGetObservable\n        _getResult.subscribe(success, reject);\n      }\n    });\n    return result;\n  }\n\n}\n","import { Direction } from '../interfaces/direction';\nimport { Routines } from './domRoutines';\n\nexport class Item {\n  $index: number;\n  data: any;\n  nodeId: string;\n  routines: Routines;\n\n  element: any;\n  invisible: boolean;\n  toRemove: boolean;\n\n  constructor($index, data, nodeId, routines) {\n    this.$index = $index;\n    this.data = data;\n    this.nodeId = nodeId;\n    this.routines = routines;\n    this.invisible = true;\n  }\n\n  getParams() {\n    return this.routines.getParams(this.element);\n  }\n\n  getEdge(direction: Direction): number {\n    return this.routines.getEdge(this.element, direction, false);\n  }\n\n  hide() {\n    this.routines.hideElement(this.element);\n  }\n\n}\n","import { Workflow } from '../workflow';\nimport { Direction } from '../interfaces/index';\nimport { Item } from '../classes/item';\n\nexport default class ProcessFetch {\n\n  static run(workflow: Workflow) {\n    ProcessFetch.runByDirection(workflow, Direction.backward);\n    ProcessFetch.runByDirection(workflow, Direction.forward);\n    return workflow;\n  }\n\n  static runByDirection(workflow: Workflow, direction: Direction) {\n    const fetch = workflow.fetch[direction];\n    if (!fetch.newItemsData) { // no fetch\n      return;\n    }\n\n    const eof = direction === Direction.forward ? 'eof' : 'bof';\n    workflow.buffer[eof] = fetch.newItemsData.length !== workflow.settings.bufferSize;\n    if (direction === Direction.backward && workflow.buffer.bof) {\n      fetch.startIndex += workflow.settings.bufferSize - fetch.newItemsData.length;\n    }\n\n    if (!fetch.newItemsData.length) { // empty result\n      return;\n    }\n    fetch.items = fetch.newItemsData.map((item, index) => {\n      const $index = fetch.startIndex + index;\n      const nodeId = workflow.settings.itemIdPrefix + String($index);\n      return new Item($index, item, nodeId, workflow.routines);\n    });\n\n    if (direction === Direction.forward) {\n      workflow.buffer.items = [...workflow.buffer.items, ...fetch.items];\n    } else {\n      workflow.buffer.items = [...fetch.items, ...workflow.buffer.items];\n    }\n  }\n\n}\n","import { Workflow } from '../workflow';\n\nexport default class Render {\n\n  static run(workflow: Workflow): Workflow | Promise<any> {\n    if (!workflow.fetch.hasNewItems) {\n      return workflow;\n    }\n    workflow.bindData();\n    return new Promise((resolve, reject) =>\n      setTimeout(() => {\n        const error = Render.setElements(workflow);\n        if (!error) {\n          resolve(workflow);\n        } else {\n          reject(error);\n        }\n      })\n    );\n  }\n\n  static setElements(workflow: Workflow) {\n    const items = workflow.fetch.items;\n    for (let j = items.length - 1; j >= 0; j--) {\n      const nodes = workflow.viewport.children;\n      for (let i = nodes.length - 1; i >= 0; i--) {\n        if (nodes[i].getAttribute('data-sid') === items[j].nodeId) {\n          items[j].element = nodes[i];\n        }\n      }\n      if (!items[j].element) { // todo: do we really need this check?\n        return new Error('Can not associate item with element');\n      }\n    }\n  }\n}\n","import { Workflow } from '../workflow';\r\nimport { Direction } from '../interfaces/index';\r\n\r\nexport default class AdjustFetch {\r\n\r\n  static run(workflow: Workflow) {\r\n    AdjustFetch.runByDirection(Direction.forward, workflow);\r\n    AdjustFetch.runByDirection(Direction.backward, workflow);\r\n    return workflow;\r\n  }\r\n\r\n  static runByDirection(direction: Direction, workflow: Workflow) {\r\n    const items = workflow.fetch[direction].items;\r\n    if (!items) {\r\n      return;\r\n    }\r\n    AdjustFetch.processFetchedItems(items);\r\n    const height = Math.abs(items[0].getEdge(Direction.backward) -\r\n      items[items.length - 1].getEdge(Direction.forward));\r\n    if (direction === Direction.forward) {\r\n      return this.adjustForward(workflow, height);\r\n    } else {\r\n      return this.adjustBackward(workflow, height);\r\n    }\r\n  }\r\n\r\n  static processFetchedItems(items) {\r\n    for (let i = items.length - 1; i >= 0; i--) {\r\n      const element = items[i].element.children[0];\r\n      element.style.left = '';\r\n      element.style.position = '';\r\n      items[i].invisible = false;\r\n    }\r\n  }\r\n\r\n  static adjustForward(workflow: Workflow, size: number) {\r\n    const paddingForward = workflow.viewport.padding[Direction.forward];\r\n    const _paddingSize = paddingForward.size || 0;\r\n    paddingForward.size = Math.max(_paddingSize - size, 0);\r\n  }\r\n\r\n  static adjustBackward(workflow: Workflow, size: number) {\r\n    const viewport = workflow.viewport;\r\n    const _scrollPosition = viewport.scrollPosition;\r\n    const paddingBackward = viewport.padding[Direction.backward];\r\n    const paddingForward = viewport.padding[Direction.forward];\r\n\r\n    // need to make \"size\" pixels in backward direction\r\n    // 1) via paddingTop\r\n    const _paddingSize = paddingBackward.size || 0;\r\n    let paddingSize = Math.max(_paddingSize - size, 0);\r\n    paddingBackward.size = paddingSize;\r\n    const paddingDiff = size - (_paddingSize - paddingSize);\r\n    // 2) via scrollTop\r\n    if (paddingDiff > 0) {\r\n      size = paddingDiff;\r\n      viewport.scrollPosition += size;\r\n      const diff = size - viewport.scrollPosition - _scrollPosition;\r\n      if (diff > 0) {\r\n        paddingSize = paddingForward.size || 0;\r\n        paddingForward.size = paddingSize + diff;\r\n        viewport.scrollPosition += diff;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { Workflow } from '../workflow';\r\nimport { Direction } from '../interfaces/index';\r\n\r\nexport default class ShouldClip {\r\n\r\n  static run(workflow: Workflow) {\r\n    const fetchOnly = workflow.settings.clipAfterFetchOnly;\r\n    const scrollOnly = workflow.settings.clipAfterScrollOnly;\r\n    if (!workflow.buffer.items.length) {\r\n      return workflow;\r\n    }\r\n    if (scrollOnly && !workflow.scroll) {\r\n      return workflow;\r\n    }\r\n    if (!fetchOnly || workflow.fetch[Direction.backward].shouldFetch) {\r\n      ShouldClip.shouldClipByDirection(Direction.backward, workflow);\r\n    }\r\n    if (!fetchOnly || workflow.fetch[Direction.forward].shouldFetch) {\r\n      ShouldClip.shouldClipByDirection(Direction.forward, workflow);\r\n    }\r\n    return workflow;\r\n  }\r\n\r\n  static shouldClipByDirection(direction: Direction, workflow: Workflow) {\r\n    const items = workflow.buffer.items;\r\n    const forward = direction === Direction.forward;\r\n    const viewport = workflow.viewport;\r\n    const viewportLimit = viewport.getLimit(direction, true);\r\n    const firstIndex = workflow.buffer.getFirstVisibleItemIndex();\r\n    const lastIndex = workflow.buffer.getLastVisibleItemIndex();\r\n    const firstItemEdge = items[firstIndex].getEdge(direction);\r\n    const lastItemEdge = items[lastIndex].getEdge(direction);\r\n\r\n    let i, itemEdge, start = -1, end = -1;\r\n    const getItemEdge = (index) =>\r\n      index === firstIndex ? firstItemEdge : (\r\n        index === lastIndex ? lastItemEdge :\r\n          items[index].getEdge(direction));\r\n\r\n    if ((forward && lastItemEdge <= viewportLimit) || (!forward && firstItemEdge >= viewportLimit)) {\r\n      // all items should be clipped\r\n      start = firstIndex;\r\n      end = lastIndex;\r\n    } else {\r\n      if (forward) {\r\n        start = firstIndex;\r\n      } else {\r\n        end = lastIndex;\r\n      }\r\n      for (\r\n        forward ? (i = 0) : (i = lastIndex);\r\n        forward ? (i <= lastIndex) : (i >= 0);\r\n        forward ? i++ : i--\r\n      ) {\r\n        itemEdge = getItemEdge(i);\r\n        if (forward && itemEdge <= viewportLimit) {\r\n          end = i;\r\n        } else if (!forward && itemEdge >= viewportLimit) {\r\n          start = i;\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (start >= 0 && end >= 0) {\r\n      for (i = start; i <= end; i++) {\r\n        items[i].toRemove = true;\r\n      }\r\n      workflow.clip[direction].shouldClip = true;\r\n      workflow.clip[direction].size =\r\n        items[end].getEdge(Direction.forward) - items[start].getEdge(Direction.backward);\r\n    }\r\n  }\r\n\r\n}\r\n","import { Workflow } from '../workflow';\r\nimport { Direction } from '../interfaces/direction';\r\n\r\nexport default class Clip {\r\n\r\n  static run(workflow: Workflow) {\r\n    if (!workflow.clip.shouldClip) {\r\n      return workflow;\r\n    }\r\n    Clip.runByDirection(Direction.forward, workflow);\r\n    Clip.runByDirection(Direction.backward, workflow);\r\n\r\n    workflow.buffer.items = workflow.buffer.items.filter(item => {\r\n      if (item.toRemove) {\r\n        workflow.buffer.cache.add(item);\r\n        item.hide();\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n    workflow.bindData();\r\n    return new Promise((resolve, reject) =>\r\n      setTimeout(() => {\r\n        Clip.processClip(workflow);\r\n        resolve(workflow);\r\n      })\r\n    );\r\n  }\r\n\r\n  static runByDirection(direction: Direction, workflow: Workflow) {\r\n    if (!workflow.clip[direction].shouldClip) {\r\n      return;\r\n    }\r\n    const opposite = direction === Direction.forward ? Direction.backward : Direction.forward;\r\n    workflow.viewport.padding[opposite].size += workflow.clip[direction].size;\r\n  }\r\n\r\n  static processClip(workflow: Workflow) {\r\n    if (!workflow.clip[Direction.backward].shouldClip) {\r\n      workflow.buffer.bof = false;\r\n    }\r\n    if (!workflow.clip[Direction.forward].shouldClip) {\r\n      workflow.buffer.eof = false;\r\n    }\r\n  }\r\n\r\n}\r\n","import { Subscription } from 'rxjs/Subscription';\n\nimport { Workflow } from './workflow';\nimport { throttle } from './utils/index';\nimport { Direction, Run } from './interfaces/index';\n\nimport ShouldFetch from './workflow/shouldFetch';\nimport Fetch from './workflow/fetch';\nimport ProcessFetch from './workflow/processFetch';\nimport Render from './workflow/render';\nimport AdjustFetch from './workflow/adjustFetch';\nimport ShouldClip from './workflow/shouldClip';\nimport Clip from './workflow/clip';\n\nexport class WorkflowRunner {\n\n  private context;\n  private onScrollListener: Function;\n  private itemsSubscription: Subscription;\n  private flowResolverSubscription: Subscription;\n  public workflow: Workflow;\n  public count: number;\n  private runNew: Run;\n  private runQueue: Run;\n  private defaultDirection = Direction.forward;\n\n  constructor(context) {\n    this.context = context;\n    this.workflow = new Workflow(this.context);\n    this.count = 0;\n    this.runQueue = null;\n    this.runNew = null;\n    this.initialize();\n  }\n\n  initialize() {\n    const flow = this.workflow;\n    const onScroll = ($event) => this.scroll($event);\n\n    this.onScrollListener =\n      this.context.renderer.listen(flow.viewport.scrollable, 'scroll', throttle(onScroll, 100));\n    this.itemsSubscription = flow.buffer.$items.subscribe(items => this.context.items = items);\n    this.flowResolverSubscription = flow.resolver.subscribe(this.resolve.bind(this));\n\n    this.run();\n  }\n\n  scroll($event) {\n    if (this.workflow.viewport.syntheticScrollPosition !== null) {\n      if (this.workflow.viewport.scrollPosition === this.workflow.viewport.syntheticScrollPosition) {\n        this.workflow.viewport.syntheticScrollPosition = null;\n        return;\n      }\n      this.workflow.viewport.syntheticScrollPosition = null;\n    }\n    this.run({ scroll: true });\n  }\n\n  resolve(next: boolean) {\n    if (this.runNew) {\n      this.run(this.runNew);\n      this.runNew = null;\n    } else if (next) {\n      this.run({\n        direction: this.workflow.direction,\n        scroll: this.workflow.scroll\n      });\n    } else if (this.runQueue) {\n      this.run(this.runQueue);\n      this.runQueue = null;\n    } else {\n      this.count++;\n      this.finalize();\n    }\n  }\n\n  run(options: Run = {}) {\n    if (!options.direction) {\n      options.direction = this.defaultDirection;\n      this.runQueue = {\n        ...options,\n        direction: options.direction === Direction.forward ? Direction.backward : Direction.forward\n      };\n    }\n    if (this.workflow.pending) {\n      this.runNew = { ...options };\n      return;\n    }\n    this.workflow.start(options)\n      .then(() => this.fetch())\n      .then(() => this.clip())\n      .then(() =>\n        this.workflow.done()\n      )\n      .catch(error =>\n        this.workflow.fail(error)\n      );\n  }\n\n  fetch() {\n    return this.workflow.continue()\n      .then(ShouldFetch.run)\n      .then(Fetch.run)\n      .then(ProcessFetch.run)\n      .then(Render.run)\n      .then(AdjustFetch.run);\n  }\n\n  clip() {\n    return this.workflow.settings.infinite ?\n      null :\n      this.workflow.continue()\n        .then(ShouldClip.run)\n        .then(Clip.run);\n  }\n\n  dispose() {\n    this.onScrollListener();\n    this.itemsSubscription.unsubscribe();\n    this.flowResolverSubscription.unsubscribe();\n    this.workflow.dispose();\n  }\n\n  finalize() { // stop queue\n    this.workflow.log(`~~~~~~ WF Cycle ${this.count} DONE ~~~~~~`);\n  }\n\n}\n","import {\n  Component, OnInit, OnDestroy,\n  TemplateRef, ElementRef, Renderer2,\n  ChangeDetectionStrategy, ChangeDetectorRef\n} from '@angular/core';\n\nimport { WorkflowRunner } from './component/runner';\nimport { Datasource } from './component/interfaces/index';\nimport { Item } from './component/classes/item';\n\n@Component({\n  selector: 'ui-scroll',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template:\n`<div data-padding-backward></div><div\n  *ngFor=\"let item of items\" [attr.data-sid]=\"item.nodeId\"\n><div\n  [style.position]=\"item.invisible ? 'fixed' : null\"\n  [style.left]=\"item.invisible ? '-99999px' : null\"\n><ng-template\n  [ngTemplateOutlet]=\"template\"\n  [ngTemplateOutletContext]=\"{\n    $implicit: item.data,\n    index: item.$index\n }\"\n></ng-template></div></div><div data-padding-forward></div>`\n})\nexport class UiScrollComponent implements OnInit, OnDestroy {\n\n  // come from the directive\n  public template: TemplateRef<any>;\n  public datasource: Datasource;\n\n  // use in the template\n  public items: Array<Item>;\n\n  // Component-Workflow integration\n  public workflowRunner: WorkflowRunner;\n\n  constructor(\n    private changeDetector: ChangeDetectorRef,\n    private elementRef: ElementRef,\n    private renderer: Renderer2\n  ) {\n  }\n\n  ngOnInit() {\n    this.workflowRunner = new WorkflowRunner(this);\n  }\n\n  ngOnDestroy() {\n    this.workflowRunner.dispose();\n  }\n}\n","import { Directive, Input, TemplateRef, ViewContainerRef, ComponentFactoryResolver, OnInit } from '@angular/core';\n\nimport { UiScrollComponent } from './ui-scroll.component';\nimport { Datasource } from './component/interfaces/datasource';\n\n@Directive({ selector: '[uiScroll][uiScrollOf]' })\nexport class UiScrollDirective implements OnInit {\n  private datasource: Datasource;\n\n  constructor(\n    private templateRef: TemplateRef<any>,\n    private viewContainer: ViewContainerRef,\n    private resolver: ComponentFactoryResolver\n  ) {}\n\n  @Input() set uiScrollOf(datasource: Datasource) {\n    this.datasource = datasource;\n  }\n\n  ngOnInit() {\n    const templateView = this.templateRef.createEmbeddedView({});\n    const compFactory = this.resolver.resolveComponentFactory(UiScrollComponent);\n    const componentRef = this.viewContainer.createComponent(compFactory, null, this.viewContainer.injector, [templateView.rootNodes]);\n    componentRef.instance.datasource = this.datasource;\n    componentRef.instance.template = this.templateRef;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { UiScrollComponent } from './ui-scroll.component';\nimport { UiScrollDirective } from './ui-scroll.directive';\n\n@NgModule({\n  declarations: [\n    UiScrollComponent,\n    UiScrollDirective\n  ],\n  imports: [CommonModule],\n  entryComponents: [UiScrollComponent],\n  exports: [UiScrollDirective],\n  providers: []\n})\nexport class UiScrollModule { }\n"],"names":["BehaviorSubject","Observable","Component","ChangeDetectionStrategy","ChangeDetectorRef","ElementRef","Renderer2","Directive","TemplateRef","ViewContainerRef","ComponentFactoryResolver","Input","NgModule","CommonModule"],"mappings":"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"}